http:
  routers:
    private-communicating-service:
      middlewares:
        - strip-first-segment
        - add-network-header
      rule: PathPrefix(`/communicating`)
      service: private-communicating-service
      entryPoints:
        - web

    private-communicating-service-1:
      middlewares:
        - strip-first-segment
        - add-network-header
      rule: PathPrefix(`/communicating-1`)
      service: private-communicating-service-1
      entryPoints:
        - web

    private-non-communicating-service:
      middlewares:
        - strip-first-segment
        - add-network-header
      rule: PathPrefix(`/non-communicating`)
      service: private-non-communicating-service
      entryPoints:
        - web

  services:
    private-communicating-service:
      loadBalancer:
        servers:
          - url: "http://private-communicating-service"

    private-communicating-service-1:
      loadBalancer:
        servers:
          - url: "http://private-communicating-service-1"

    private-non-communicating-service:
      loadBalancer:
        servers:
          - url: "http://private-non-communicating-service"
